<%= render partial: 'components/nav_bar', locals: {
  title: 'Create New Game'
} %>

<%= form_for @game, url: games_path, method: :post, local: true do |f| %>
  <h2> Played at: </h2>
  <%= date_field(:game, :played_at, value: Time.zone.now.strftime('%Y-%m-%d')) %>
  <br>
  <h2> State: </h2>
  <%= f.select(:state, options_for_select(%i[completed pending])) %>
  <br>
  <h2> Participating Players: </h2>
  <% @game.game_records.each do |game_record| %>
    <div>
      <%= f.fields_for :game_record do |game_record_form| %>
        Player: <%= game_record_form.select(:player_id, options_for_select(
          @players.collect do |player|
            [player.name, player.id]
          end
        )) %>
        Deck: <%= game_record_form.select(:deck_id, options_for_select(
          @decks.collect do |deck|
            [deck.name, deck.id]
          end
        )) %>
        Result: <%= game_record_form.select(:result, options_for_select(%i[loss win draw])) %>
      <% end %>
    <div>
  <% end %>
  <br>
  <%= f.submit %>
<% end %>
